{
  "timestamp": "2025-07-14T23:19:45.518355Z",
  "category": "bug",
  "priority": "critical",
  "source_agent": "research_agent",
  "project_context": "claude-multiagent-pm-v0.8.2",
  "related_tasks": [
    "npm-package-deployment",
    "framework-initialization"
  ],
  "resolution_status": "open",
  "impact_scope": "global",
  "user_id": "fresh_installation_users",
  "title": "NPM Package Missing Critical Python Components for Fresh Installations",
  "description": "Fresh installations fail because pyproject.toml is excluded from NPM package, preventing Python package installation",
  "bug_details": {
    "missing_components": [
      "pyproject.toml - Required for pip install -e .",
      "AI dependencies missing from base installation (mem0ai, chromadb, aiosqlite)",
      "mem0ai not installed by default - breaks memory system"
    ],
    "failure_points": [
      "postinstall-minimal.js tries to run 'pip install -e .' but pyproject.toml missing from NPM package",
      "Python dependencies specified in pyproject.toml[ai] not installed automatically",
      "Framework initialization fails without proper Python package installation",
      "Memory system initialization fails due to missing mem0ai dependency",
      "User must manually create pyproject.toml to proceed with installation"
    ],
    "npm_package_files_array_issue": "pyproject.toml not included in package.json 'files' array",
    "affected_users": "All fresh installations via npm install -g @bobmatnyc/claude-multiagent-pm"
  },
  "reproduction_steps": [
    "1. Fresh machine without existing claude-multiagent-pm",
    "2. Run npm install -g @bobmatnyc/claude-multiagent-pm", 
    "3. Try to run claude-pm init",
    "4. Python package installation fails due to missing pyproject.toml",
    "5. Framework initialization fails completely"
  ],
  "root_causes": [
    "pyproject.toml not included in package.json files array",
    "AI dependencies (mem0ai, chromadb, aiosqlite) not in base Python installation",
    "Package publication testing done on development machine with existing Python package",
    "postinstall script assumes pyproject.toml will be present",
    "No fallback mechanism for missing Python dependencies"
  ],
  "immediate_fixes_required": [
    "Add pyproject.toml to package.json files array",
    "Include AI dependencies in base Python installation or provide fallback",
    "Update postinstall script to handle missing pyproject.toml gracefully",
    "Add validation for critical dependencies before framework initialization",
    "Test package installation on fresh virtual machine without existing dependencies"
  ],
  "testing_gaps": [
    "No testing on fresh machines without existing Python package",
    "Missing validation for critical NPM package components",
    "No automated testing of complete fresh installation flow",
    "Package publication testing relies on development environment"
  ]
}