---
actual_hours: null
assignees: []
created_at: '2025-07-22T16:10:38.187697'
dependencies: []
description: "When running claude-pm init from the framework source directory, it\
  \ incorrectly attempts to deploy the operational CLAUDE.md to the parent directory,\
  \ overwriting the development CLAUDE.md. This violates the separation between framework\
  \ development files and operational deployment files.\n\n## Problem Description\n\
  - Running 'claude-pm init' from claude-multiagent-pm source directory overwrites\
  \ the development CLAUDE.md\n- The framework treats its own source directory as\
  \ a regular project\n- Development CLAUDE.md (for framework contributors) gets replaced\
  \ with operational CLAUDE.md (for PM agents)\n\n## Root Cause\n- setup_commands.py\
  \ deploys CLAUDE.md to parent directory without checking if current directory is\
  \ framework source\n- No detection logic to identify framework source directory\
  \ vs project directory\n- deploy.js also overwrites CLAUDE.md without checking (fixed\
  \ in previous commit)\n\n## Expected Behavior\n- Framework source directory should\
  \ be detected and protected\n- claude-pm init should skip CLAUDE.md deployment when\
  \ run from framework source\n- Clear message should indicate framework directory\
  \ was detected\n\n## Proposed Solution\n1. Add framework source detection logic\
  \ checking for:\n   - pyproject.toml with name = 'claude-multiagent-pm'\n   - Presence\
  \ of claude_pm source directory\n   - package.json with framework identifiers\n\
  2. Skip CLAUDE.md deployment if framework source detected\n3. Add appropriate console\
  \ messages for transparency\n\n## Acceptance Criteria\n- [ ] Framework source directory\
  \ is correctly detected\n- [ ] CLAUDE.md deployment is skipped in framework source\n\
  - [ ] Clear user message explains why deployment was skipped\n- [ ] Development\
  \ CLAUDE.md remains protected\n- [ ] Normal project deployments continue to work"
due_date: null
estimated_hours: null
id: ISS-0003
labels: []
metadata:
  issue_type: bug
  severity: high
  type: issue
parent: null
priority: high
status: open
tags:
- issue
- bug
- framework
- deployment
- protection
title: Framework Source Directory Detection and CLAUDE.md Protection
updated_at: '2025-07-22T16:10:38.187697'
---

# Framework Source Directory Detection and CLAUDE.md Protection

## Description
When running claude-pm init from the framework source directory, it incorrectly attempts to deploy the operational CLAUDE.md to the parent directory, overwriting the development CLAUDE.md. This violates the separation between framework development files and operational deployment files.

## Problem Description
- Running 'claude-pm init' from claude-multiagent-pm source directory overwrites the development CLAUDE.md
- The framework treats its own source directory as a regular project
- Development CLAUDE.md (for framework contributors) gets replaced with operational CLAUDE.md (for PM agents)

## Root Cause
- setup_commands.py deploys CLAUDE.md to parent directory without checking if current directory is framework source
- No detection logic to identify framework source directory vs project directory
- deploy.js also overwrites CLAUDE.md without checking (fixed in previous commit)

## Expected Behavior
- Framework source directory should be detected and protected
- claude-pm init should skip CLAUDE.md deployment when run from framework source
- Clear message should indicate framework directory was detected

## Proposed Solution
1. Add framework source detection logic checking for:
   - pyproject.toml with name = 'claude-multiagent-pm'
   - Presence of claude_pm source directory
   - package.json with framework identifiers
2. Skip CLAUDE.md deployment if framework source detected
3. Add appropriate console messages for transparency

## Acceptance Criteria
- [ ] Framework source directory is correctly detected
- [ ] CLAUDE.md deployment is skipped in framework source
- [ ] Clear user message explains why deployment was skipped
- [ ] Development CLAUDE.md remains protected
- [ ] Normal project deployments continue to work

## Details
- **Status**: open
- **Priority**: high
- **Assignees**: None
- **Tags**: issue, bug, framework, deployment, protection
- **Created**: 2025-07-22 16:10:38
- **Updated**: 2025-07-22 16:10:38

## Tasks
- [ ] Add task items here

## Notes
_Add any additional notes or context here._
